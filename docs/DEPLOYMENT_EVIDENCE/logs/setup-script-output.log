[STEP] Verifying Prerequisites
âœ“ SUCCESS: kubectl found
âœ“ SUCCESS: helm found
âœ“ SUCCESS: Kubernetes cluster is accessible

[STEP] Creating Namespaces
âœ“ SUCCESS: Namespace: ingress-nginx
âœ“ SUCCESS: Namespace: monitoring
âœ“ SUCCESS: Namespace: cert-manager

[STEP] Installing Cert-Manager (TLS Management)
â„¹ INFO: Adding Helm repository...
â„¹ INFO: Installing cert-manager...
âœ“ SUCCESS: Cert-Manager installed
â„¹ INFO: Waiting for cert-manager webhook to be ready (this takes ~30 seconds)...
âœ“ SUCCESS: Cert-Manager webhook is ready

[STEP] Setting Up TLS with SelfSigned Issuer
âœ“ SUCCESS: SelfSigned ClusterIssuer created

[STEP] Installing NGINX Ingress Controller
â„¹ INFO: Adding Helm repository...
â„¹ INFO: Installing NGINX ingress controller...
âœ“ SUCCESS: NGINX Ingress Controller installed

[STEP] Creating Storage Class
âœ“ SUCCESS: Storage Class created

[STEP] Deploying Microservice (Service-A)
â„¹ INFO: Creating deployment...
âœ“ SUCCESS: Service-A deployment created
â„¹ INFO: Creating service...
âœ“ SUCCESS: Service-A service created
â„¹ INFO: Waiting for Service-A pods to be ready...
âœ“ SUCCESS: Service-A pods are running

[STEP] Creating Ingress with TLS
âœ“ SUCCESS: Ingress with TLS created
â„¹ INFO: Waiting for TLS certificate to be issued (this takes ~30 seconds)...
âœ“ SUCCESS: TLS certificate created

[STEP] Setting Up Horizontal Pod Autoscaler (HPA)
âœ“ SUCCESS: HPA created (min: 2, max: 10 replicas)

[STEP] Installing Prometheus & Grafana Monitoring Stack
â„¹ INFO: Adding Helm repositories...
â„¹ INFO: Installing kube-prometheus-stack (includes Prometheus + Grafana)...
âœ“ SUCCESS: Prometheus & Grafana stack installed

[STEP] Verifying Deployment
â„¹ INFO: Checking all pods...
âœ“ SUCCESS: Pods: 17/17 running
â„¹ INFO: Checking ingress...
âœ“ SUCCESS: Ingress configured
â„¹ INFO: Checking HPA...
âœ“ SUCCESS: HPA configured

[STEP] Setup Complete! ðŸŽ‰

======================================
Access Instructions
======================================

1. Access Grafana Dashboard
   Command: kubectl port-forward svc/monitoring-stack-grafana -n monitoring 3000:80
   URL: http://localhost:3000
   Username: admin
   Password: admin123

2. Access Prometheus
   Command: kubectl port-forward svc/monitoring-stack-kube-prom-prometheus -n monitoring 9091:9090
   URL: http://localhost:9091

3. Access Service-A via HTTPS
   Command: kubectl port-forward svc/ingress-nginx-controller -n ingress-nginx 8443:443
   Test: curl -k https://localhost:8443/

4. Test HPA (Generate Load)
   Start load: kubectl run load-generator --image=busybox --restart=Never -- /bin/sh -c "while true; do wget -q -O- http://service-a.default.svc.cluster.local; done"
   Watch HPA: kubectl get hpa service-a-hpa --watch
   Stop load: kubectl delete pod load-generator

5. Useful Commands
   kubectl get pods -A                     # View all pods
   kubectl get svc -A                      # View all services
   kubectl get ingress                     # View ingress
   kubectl get hpa                         # View autoscaler
   kubectl logs deployment/service-a       # View service logs

======================================
Setup Complete! Happy DevOps-ing! ðŸš€
======================================
