---
- name: 06 - INSPECT KUBE-APISERVER MANIFEST
  hosts: control_plane
  become: yes
  gather_facts: no
  
  tasks:
    - name: A. Read the kube-apiserver.yaml manifest
      ansible.builtin.slurp:
        src: /etc/kubernetes/manifests/kube-apiserver.yaml
      register: apiserver_manifest

    - name: B. Decode and Display the manifest content
      ansible.builtin.debug:
        msg: |
          ========= KUBE API SERVER MANIFEST (/etc/kubernetes/manifests/kube-apiserver.yaml) =========
          {{ apiserver_manifest['content'] | b64decode }}
          ==========================================================================================
